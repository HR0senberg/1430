// –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–±–µ–π—Ç–µ –Ω–∞ –º–æ–¥—É–ª–∏ –∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ namespace
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤—ã–Ω–µ—Å–∏—Ç–µ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ (user.js, subjects.js, achievements.js)
// –ü–†–ò–ú–ï–†: import { userData } from './modules/user.js';

// –û—Å–Ω–æ–≤–Ω–æ–π –æ–±—ä–µ–∫—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ –ø–æ–ª—è –±–µ–∑ –Ω–∞—Ä—É—à–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
// –ü–†–ò–ú–ï–†: –¥–æ–±–∞–≤—å—Ç–µ settings: { theme: 'light', language: 'ru' }
let userData = {
    username: '–ü–∏–ª–æ—Ç', // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–¥–µ–ª–∞–π—Ç–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    // –ü–†–ò–ú–ï–†: –ø–æ–∑–≤–æ–ª—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–∑–º–µ–Ω–∏—Ç—å –∏–º—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
    
    totalXP: 0, // –û–±—â–∏–π –æ–ø—ã—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –∏—Å—Ç–æ—Ä–∏—é –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –æ–ø—ã—Ç–∞
    // –ü–†–ò–ú–ï–†: xpHistory: [{ date: '2025-01-01', xp: 10, source: 'quiz' }]
    
    level: 1, // –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–∏—Å—Ç–µ–º–∞ —É—Ä–æ–≤–Ω–µ–π —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏
    // –ü–†–ò–ú–ï–†: levelBenefits: { 1: ['basic'], 5: ['advanced'] }
    
    achievements: [], // –ú–∞—Å—Å–∏–≤ ID –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –¥–∞—Ç—É –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
    // –ü–†–ò–ú–ï–†: achievements: [{ id: 'first_quiz', date: '2025-01-01', progress: 100 }]
    
    subjectProgress: {}, // –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–µ–º–∞–º –≤–Ω—É—Ç—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: subjectProgress: { '–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞': { topics: { '–ê–ª–≥–µ–±—Ä–∞': { correct: 5 } } } }
    
    quizzesTaken: 0, // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö –≤–∏–∫—Ç–æ—Ä–∏–Ω
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: quizStats: { averageTime: 120, difficultyRating: 3.5 }
    
    correctAnswers: 0, // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –≤–æ–ø—Ä–æ—Å–æ–≤
    // –ü–†–ò–ú–ï–†: answerTypes: { 'multiple-choice': 50, 'true-false': 20 }
    
    wrongAnswers: 0, // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
    // –ü–†–ò–ú–ï–†: commonMistakes: [{ topic: '–¥—Ä–æ–±–∏', count: 5 }]
    
    dailyStreak: 0, // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–∞–≥—Ä–∞–¥—ã –∑–∞ —Å—Ç—Ä–∏–∫–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
    // –ü–†–ò–ú–ï–†: streakRewards: { 7: 'bonus_xp', 30: 'special_badge' }
    
    lastLoginDate: null // –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ç—Ä–∏–∫–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: sessionHistory: [{ date: '2025-01-01', duration: 1800 }]
};

// –ú–∞—Å—Å–∏–≤ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏ –¥–ª—è –≤–∏–∫—Ç–æ—Ä–∏–Ω
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∑–∞–≥—Ä—É–∂–∞–π—Ç–µ –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ API –∏–ª–∏ JSON —Ñ–∞–π–ª–æ–≤
// –ü–†–ò–ú–ï–†: fetch('/api/subjects').then(response => response.json())
const subjects = [
    {
        name: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", // –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ, —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –∫–∞—Ç–µ–≥–æ—Ä–∏—é
        // –ü–†–ò–ú–ï–†: description: "–û—Å–Ω–æ–≤—ã –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∏ –∏ –∞–ª–≥–µ–±—Ä—ã"
        
        icon: "üìê", // –ò–∫–æ–Ω–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ (—ç–º–æ–¥–∑–∏)
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SVG –∏–∫–æ–Ω–∫–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
        // –ü–†–ò–ú–ï–†: icon: "<svg>...</svg>" –∏–ª–∏ iconUrl: "/icons/math.svg"
        
        color: "#3498db", // –¶–≤–µ—Ç —Ç–µ–º—ã –ø—Ä–µ–¥–º–µ—Ç–∞
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–∞–ª–∏—Ç—Ä–∞ —Ü–≤–µ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞
        // –ü–†–ò–ú–ï–†: colorPalette: { primary: "#3498db", secondary: "#2980b9" }
        
        questions: [ // –ú–∞—Å—Å–∏–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–µ–º–∞–º –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            // –ü–†–ò–ú–ï–†: topics: [{ name: "–ê—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞", questions: [...] }]
            
            {
                question: "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 2 + 2?", // –¢–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ HTML, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ñ–æ—Ä–º—É–ª
                // –ü–†–ò–ú–ï–†: questionHtml: "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç <math>2 + 2</math>?"
                
                options: ["3", "4", "5"], // –í–∞—Ä–∏–∞–Ω—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, —Å–º–µ—à–∏–≤–∞–Ω–∏–µ
                // –ü–†–ò–ú–ï–†: options: [{text: "3", isCorrect: false}, {text: "4", isCorrect: true}]
                
                correct: 1, // –ò–Ω–¥–µ–∫—Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (–Ω–∞—á–∏–Ω–∞—è —Å 0)
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
                // –ü–†–ò–ú–ï–†: correct: [1, 2] –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
                
                points: 10 // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—á–∫–æ–≤ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –æ—á–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                // –ü–†–ò–ú–ï–†: points: { easy: 5, medium: 10, hard: 20 }
            },
            {
                question: "–ß—Ç–æ –±–æ–ª—å—à–µ: 7 –∏–ª–∏ 5?",
                options: ["7", "5", "–û–¥–∏–Ω–∞–∫–æ–≤–æ"],
                correct: 0,
                points: 10
            },
            {
                question: "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 10 - 3?",
                options: ["6", "7", "8"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ 3 √ó 4?",
                options: ["12", "13", "11"],
                correct: 0,
                points: 10
            },
            {
                question: "–°–∫–æ–ª—å–∫–æ —É–≥–ª–æ–≤ —É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞?",
                options: ["2", "3", "4"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ –±–æ–ª—å—à–µ: –ø–æ–ª–æ–≤–∏–Ω–∞ –∏–ª–∏ —á–µ—Ç–≤–µ—Ä—Ç—å?",
                options: ["–ü–æ–ª–æ–≤–∏–Ω–∞", "–ß–µ—Ç–≤–µ—Ä—Ç—å", "–û–¥–∏–Ω–∞–∫–æ–≤–æ"],
                correct: 0,
                points: 10
            },
            {
                question: "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 15 √∑ 3?",
                options: ["4", "5", "6"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–≤–∞–¥—Ä–∞—Ç —á–∏—Å–ª–∞ 4?",
                options: ["8", "16", "12"],
                correct: 1,
                points: 10
            },
            {
                question: "–°–∫–æ–ª—å–∫–æ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–æ–≤ –≤ –º–µ—Ç—Ä–µ?",
                options: ["10", "100", "1000"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–∏–º–µ—Ç—Ä –∫–≤–∞–¥—Ä–∞—Ç–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω–æ–π 3?",
                options: ["9", "12", "6"],
                correct: 1,
                points: 10
            }
        ]
    },
    {
        name: "–§–∏–∑–∏–∫–∞",
        icon: "‚öõÔ∏è",
        color: "#9b59b6",
        questions: [
            {
                question: "–ß—Ç–æ –ø—Ä–∏—Ç—è–≥–∏–≤–∞–µ—Ç –ø—Ä–µ–¥–º–µ—Ç—ã –∫ –ó–µ–º–ª–µ?",
                options: ["–ú–∞–≥–Ω–µ—Ç–∏–∑–º", "–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è", "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤–æ"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ –±—ã—Å—Ç—Ä–µ–µ: —Å–≤–µ—Ç –∏–ª–∏ –∑–≤—É–∫?",
                options: ["–°–≤–µ—Ç", "–ó–≤—É–∫", "–û–¥–∏–Ω–∞–∫–æ–≤–æ"],
                correct: 0,
                points: 10
            },
            {
                question: "–°–∫–æ–ª—å–∫–æ –ø–ª–∞–Ω–µ—Ç –≤ –°–æ–ª–Ω–µ—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ?",
                options: ["7", "8", "9"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ H2O?",
                options: ["–ö–∏—Å–ª–æ—Ä–æ–¥", "–í–æ–¥–∞", "–í–æ–¥–æ—Ä–æ–¥"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ –∏–∑–º–µ—Ä—è–µ—Ç—Å—è –≤ –∞–º–ø–µ—Ä–∞—Ö?",
                options: ["–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ", "–°–∏–ª–∞ —Ç–æ–∫–∞", "–°–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –≤–æ–¥–æ–π –ø—Ä–∏ 0¬∞C?",
                options: ["–ö–∏–ø–∏—Ç", "–ó–∞–º–µ—Ä–∑–∞–µ—Ç", "–ò—Å–ø–∞—Ä—è–µ—Ç—Å—è"],
                correct: 1,
                points: 10
            },
            {
                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω–µ—Ä—Ü–∏—è?",
                options: ["–î–≤–∏–∂–µ–Ω–∏–µ", "–ü–æ–∫–æ–π", "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è"],
                correct: 2,
                points: 10
            },
            {
                question: "–ï–¥–∏–Ω–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å–∏–ª—ã?",
                options: ["–ù—å—é—Ç–æ–Ω", "–î–∂–æ—É–ª—å", "–í–∞—Ç—Ç"],
                correct: 0,
                points: 10
            },
            {
                question: "–ß—Ç–æ —Ç–∞–∫–æ–µ –æ—Ç—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–µ—Ç–∞?",
                options: ["–ü–æ–≥–ª–æ—â–µ–Ω–∏–µ", "–û—Ç—Å–∫–æ–∫", "–ü—Ä–µ–ª–æ–º–ª–µ–Ω–∏–µ"],
                correct: 1,
                points: 10
            },
            {
                question: "–°–∫–æ—Ä–æ—Å—Ç—å —Å–≤–µ—Ç–∞ –≤ –≤–∞–∫—É—É–º–µ?",
                options: ["300,000 –∫–º/—Å", "150,000 –∫–º/—Å", "600,000 –∫–º/—Å"],
                correct: 0,
                points: 10
            }
        ]
    },
    {
        name: "–ò—Å—Ç–æ—Ä–∏—è",
        icon: "üèõÔ∏è",
        color: "#8b4513",
        questions: [
            {
                question: "–í –∫–∞–∫–æ–º –≥–æ–¥—É –æ—Å–Ω–æ–≤–∞–Ω–∞ –ú–æ—Å–∫–≤–∞?",
                options: ["1147", "1157", "1167"],
                correct: 0,
                points: 10
            },
            {
                question: "–ö—Ç–æ –Ω–∞–ø–∏—Å–∞–ª \"–í–æ–π–Ω–∞ –∏ –º–∏—Ä\"?",
                options: ["–ü—É—à–∫–∏–Ω", "–¢–æ–ª—Å—Ç–æ–π", "–î–æ—Å—Ç–æ–µ–≤—Å–∫–∏–π"],
                correct: 1,
                points: 10
            },
            {
                question: "–ö–æ–≥–¥–∞ –Ω–∞—á–∞–ª–∞—Å—å –í–µ–ª–∏–∫–∞—è –û—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≤–æ–π–Ω–∞?",
                options: ["1941", "1939", "1942"],
                correct: 0,
                points: 10
            },
            {
                question: "–ü–µ—Ä–≤—ã–π —Ä—É—Å—Å–∫–∏–π —Ü–∞—Ä—å?",
                options: ["–ü–µ—Ç—Ä I", "–ò–≤–∞–Ω –ì—Ä–æ–∑–Ω—ã–π", "–†—é—Ä–∏–∫"],
                correct: 1,
                points: 10
            },
            {
                question: "–°—Ç–æ–ª–∏—Ü–∞ –î—Ä–µ–≤–Ω–µ–π –†—É—Å–∏?",
                options: ["–ú–æ—Å–∫–≤–∞", "–ö–∏–µ–≤", "–ù–æ–≤–≥–æ—Ä–æ–¥"],
                correct: 1,
                points: 10
            },
            {
                question: "–ö—Ç–æ –∫—Ä–µ—Å—Ç–∏–ª –†—É—Å—å?",
                options: ["–í–ª–∞–¥–∏–º–∏—Ä I", "–Ø—Ä–æ—Å–ª–∞–≤ –ú—É–¥—Ä—ã–π", "–û–ª–µ–≥ –í–µ—â–∏–π"],
                correct: 0,
                points: 10
            },
            {
                question: "–ë–∏—Ç–≤–∞ –Ω–∞ –ö—É–ª–∏–∫–æ–≤–æ–º –ø–æ–ª–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –≤:",
                options: ["1380", "1240", "1480"],
                correct: 0,
                points: 10
            },
            {
                question: "–ö—Ç–æ –æ—Å–Ω–æ–≤–∞–ª –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥?",
                options: ["–ü–µ—Ç—Ä I", "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ II", "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä I"],
                correct: 0,
                points: 10
            },
            {
                question: "–ö–æ–≥–¥–∞ –æ—Ç–º–µ–Ω–∏–ª–∏ –∫—Ä–µ–ø–æ—Å—Ç–Ω–æ–µ –ø—Ä–∞–≤–æ?",
                options: ["1861", "1871", "1851"],
                correct: 0,
                points: 10
            },
            {
                question: "–ü–µ—Ä–≤—ã–π –∫–æ—Å–º–æ–Ω–∞–≤—Ç?",
                options: ["–¢–∏—Ç–æ–≤", "–ì–∞–≥–∞—Ä–∏–Ω", "–¢–µ—Ä–µ—à–∫–æ–≤–∞"],
                correct: 1,
                points: 10
            }
        ]
    },
    {
        name: "–ì–µ–æ–≥—Ä–∞—Ñ–∏—è",
        icon: "üåç",
        color: "#1abc9c",
        questions: [
            {
                question: "–°—Ç–æ–ª–∏—Ü–∞ –†–æ—Å—Å–∏–∏?",
                options: ["–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–ú–æ—Å–∫–≤–∞", "–ï–∫–∞—Ç–µ—Ä–∏–Ω–±—É—Ä–≥"],
                correct: 1,
                points: 10
            },
            {
                question: "–°–∞–º—ã–π –±–æ–ª—å—à–æ–π –æ–∫–µ–∞–Ω?",
                options: ["–ê—Ç–ª–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π", "–¢–∏—Ö–∏–π", "–ò–Ω–¥–∏–π—Å–∫–∏–π"],
                correct: 1,
                points: 10
            },
            {
                question: "–ù–∞ –∫–∞–∫–æ–º –º–∞—Ç–µ—Ä–∏–∫–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ï–≥–∏–ø–µ—Ç?",
                options: ["–ê–∑–∏—è", "–ê—Ñ—Ä–∏–∫–∞", "–ï–≤—Ä–æ–ø–∞"],
                correct: 1,
                points: 10
            },
            {
                question: "–°–∞–º–∞—è –¥–ª–∏–Ω–Ω–∞—è —Ä–µ–∫–∞ –≤ –º–∏—Ä–µ?",
                options: ["–ù–∏–ª", "–ê–º–∞–∑–æ–Ω–∫–∞", "–í–æ–ª–≥–∞"],
                correct: 0,
                points: 10
            },
            {
                question: "–°–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ –ó–µ–º–ª–µ?",
                options: ["5", "6", "7"],
                correct: 2,
                points: 10
            },
            {
                question: "–°—Ç–æ–ª–∏—Ü–∞ –§—Ä–∞–Ω—Ü–∏–∏?",
                options: ["–õ–æ–Ω–¥–æ–Ω", "–ü–∞—Ä–∏–∂", "–†–∏–º"],
                correct: 1,
                points: 10
            },
            {
                question: "–°–∞–º–∞—è –≤—ã—Å–æ–∫–∞—è –≥–æ—Ä–∞ –≤ –º–∏—Ä–µ?",
                options: ["–≠–ª—å–±—Ä—É—Å", "–≠–≤–µ—Ä–µ—Å—Ç", "–ö–∏–ª–∏–º–∞–Ω–¥–∂–∞—Ä–æ"],
                correct: 1,
                points: 10
            },
            {
                question: "–í –∫–∞–∫–æ–π —Å—Ç—Ä–∞–Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –¢–æ–∫–∏–æ?",
                options: ["–ö–∏—Ç–∞–π", "–Ø–ø–æ–Ω–∏—è", "–ö–æ—Ä–µ—è"],
                correct: 1,
                points: 10
            },
            {
                question: "–ö–∞–∫–æ–µ –º–æ—Ä–µ –æ–º—ã–≤–∞–µ—Ç –°–æ—á–∏?",
                options: ["–ß–µ—Ä–Ω–æ–µ", "–ê–∑–æ–≤—Å–∫–æ–µ", "–ö–∞—Å–ø–∏–π—Å–∫–æ–µ"],
                correct: 0,
                points: 10
            },
            {
                question: "–°–∞–º–∞—è –º–∞–ª–µ–Ω—å–∫–∞—è —Å—Ç—Ä–∞–Ω–∞ –≤ –º–∏—Ä–µ?",
                options: ["–ú–æ–Ω–∞–∫–æ", "–í–∞—Ç–∏–∫–∞–Ω", "–°–∞–Ω-–ú–∞—Ä–∏–Ω–æ"],
                correct: 1,
                points: 10
            }
        ]
    }
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ 10 –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–æ —Ç–æ–π –∂–µ —Å—Ö–µ–º–µ
    // –ü–†–ò–ú–ï–†: –•–∏–º–∏—è, –ë–∏–æ–ª–æ–≥–∏—è, –†—É—Å—Å–∫–∏–π —è–∑—ã–∫, –ê–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫, –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞,
    // –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–∫–∞, –ú—É–∑—ã–∫–∞, –ò–ó–û, –§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞, –û–ë–ñ
];

// –ú–∞—Å—Å–∏–≤ –≤—Å–µ—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –≤ —Å–∏—Å—Ç–µ–º–µ
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è, —É—Ä–æ–≤–Ω–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, —Å–µ–∑–æ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
// –ü–†–ò–ú–ï–†: categories: ['learning', 'social', 'streak', 'special']
const achievements = [
    {
        id: "first_quiz", // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ UUID –∏–ª–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—É—é —Å—Ö–µ–º—É
        // –ü–†–ò–ú–ï–†: id: "achieve_001_first_quiz_v1"
        
        title: "–ü–µ—Ä–≤—ã–π —à–∞–≥", // –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π
        // –ü–†–ò–ú–ï–†: title: { ru: "–ü–µ—Ä–≤—ã–π —à–∞–≥", en: "First Step" }
        
        description: "–ü—Ä–æ–π–¥–∏ –ø–µ—Ä–≤—É—é –≤–∏–∫—Ç–æ—Ä–∏–Ω—É", // –û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª–æ–≤–∏–π
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å
        // –ü–†–ò–ú–ï–†: description: "–ü—Ä–æ–π–¥–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—É –ø–æ –ª—é–±–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É (0/1)"
        
        icon: "üéì", // –ò–∫–æ–Ω–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –∏–ª–∏ SVG
        // –ü–†–ò–ú–ï–†: iconAnimation: "bounce", iconUrl: "/icons/first-step.svg"
        
        rarity: "common", // –†–µ–¥–∫–æ—Å—Ç—å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–¥–∫–æ—Å—Ç–∏ –≤–ª–∏—è–µ—Ç –Ω–∞ –Ω–∞–≥—Ä–∞–¥—ã
        // –ü–†–ò–ú–ï–†: rarity: { level: "common", multiplier: 1.0, color: "#gray" }
        
        points: 10, // –û—á–∫–∏ –æ–ø—ã—Ç–∞ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–Ω—É—Å—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–µ–¥–∫–æ—Å—Ç–∏
        // –ü–†–ò–ú–ï–†: rewards: { xp: 10, coins: 5, unlocks: ['new_theme'] }
        
        condition: { // –£—Å–ª–æ–≤–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            type: "quizzes", // –¢–∏–ø —É—Å–ª–æ–≤–∏—è
            count: 1 // –¢—Ä–µ–±—É–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–ª–æ–∂–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
            // –ü–†–ò–ú–ï–†: condition: { type: "and", conditions: [{ type: "quizzes", count: 1 }, { type: "score", min: 80 }] }
        }
    },
    {
        id: "math_novice",
        title: "–Æ–Ω—ã–π –º–∞—Ç–µ–º–∞—Ç–∏–∫",
        description: "–û—Ç–≤–µ—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ 5 –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–µ",
        icon: "üî¢",
        rarity: "common",
        points: 25,
        condition: {
            type: "subject_correct",
            subject: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞",
            count: 5
        }
    },
    {
        id: "perfect_quiz",
        title: "–ò–¥–µ–∞–ª—å–Ω—ã–π –ø–æ–ª—ë—Ç",
        description: "–ü—Ä–æ–π–¥–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—É –±–µ–∑ –æ—à–∏–±–æ–∫",
        icon: "‚≠ê",
        rarity: "rare",
        points: 50,
        condition: {
            type: "perfect_score",
            count: 1
        }
    },
    {
        id: "week_streak",
        title: "–ù–µ–¥–µ–ª—è –≤ –ø–æ–ª—ë—Ç–µ",
        description: "–ü—Ä–æ—Ö–æ–¥–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã 7 –¥–Ω–µ–π –ø–æ–¥—Ä—è–¥",
        icon: "üî•",
        rarity: "rare",
        points: 100,
        condition: {
            type: "daily_streak",
            count: 7
        }
    },
    {
        id: "knowledge_seeker",
        title: "–ò—Å–∫–∞—Ç–µ–ª—å –∑–Ω–∞–Ω–∏–π",
        description: "–ü—Ä–æ–π–¥–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã –ø–æ 3 —Ä–∞–∑–Ω—ã–º –ø—Ä–µ–¥–º–µ—Ç–∞–º",
        icon: "üîç",
        rarity: "uncommon",
        points: 75,
        condition: {
            type: "subjects_tried",
            count: 3
        }
    }
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –µ—â—ë 45+ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    // –ü–†–ò–ú–ï–†–´: speed_demon (–±—ã—Å—Ç—Ä–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ), social_butterfly (–ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º),
    // comeback_kid (—É–ª—É—á—à–µ–Ω–∏–µ –ø–æ—Å–ª–µ –Ω–µ—É–¥–∞—á), explorer (–≤—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã), master (–≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å)
];

// –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç—ã —à–∫–æ–ª—ã
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è 3D –∫–∞—Ä—Ç–∞, –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ç—É—Ä—ã
// –ü–†–ò–ú–ï–†: 3D –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, 360¬∞ –ø–∞–Ω–æ—Ä–∞–º—ã, –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å
const mapData = {
    floors: [ // –ú–∞—Å—Å–∏–≤ —ç—Ç–∞–∂–µ–π
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–¥–≤–∞–ª—ã, —á–µ—Ä–¥–∞–∫–∏, –≤–Ω–µ—à–Ω–∏–µ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏
        // –ü–†–ò–ú–ï–†: underground: [...], outdoor: [...], roof: [...]
        
        {
            number: 1, // –ù–æ–º–µ—Ä —ç—Ç–∞–∂–∞
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–∞–∑–≤–∞–Ω–∏—è —ç—Ç–∞–∂–µ–π, —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
            // –ü–†–ò–ú–ï–†: name: "–ù–∞—É—á–Ω—ã–π —ç—Ç–∞–∂", theme: "science"
            
            rooms: [ // –ö–æ–º–Ω–∞—Ç—ã –Ω–∞ —ç—Ç–∞–∂–µ
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–º–Ω–∞—Ç–∞—Ö
                // –ü–†–ò–ú–ï–†: capacity, equipment, schedule, 360¬∞ photos
                
                {
                    id: "101", // –ù–æ–º–µ—Ä –∫–∞–±–∏–Ω–µ—Ç–∞
                    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: QR –∫–æ–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                    // –ü–†–ò–ú–ï–†: qrCode: "room_101_qr_data"
                    
                    name: "–ö–∞–±–∏–Ω–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏", // –ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–±–∏–Ω–µ—Ç–∞
                    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
                    // –ü–†–ò–ú–ï–†: name: { ru: "–ö–∞–±–∏–Ω–µ—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏", en: "Math Classroom" }
                    
                    subject: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", // –°–≤—è–∑–∞–Ω–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç
                    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
                    // –ü–†–ò–ú–ï–†: subjects: ["–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞", "–§–∏–∑–∏–∫–∞"], primary: "–ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞"
                    
                    teacher: "–ò–≤–∞–Ω–æ–≤–∞ –ê.–ü.", // –£—á–∏—Ç–µ–ª—å
                    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ—Ñ–∏–ª–∏ —É—á–∏—Ç–µ–ª–µ–π, –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
                    // –ü–†–ò–ú–ï–†: teacher: { name: "–ò–≤–∞–Ω–æ–≤–∞ –ê.–ü.", photo: "/teachers/ivanova.jpg", bio: "..." }
                    
                    x: 50, // X –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ (–≤ –ø–∏–∫—Å–µ–ª—è—Ö –∏–ª–∏ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)
                    y: 50, // Y –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–µ
                    w: 100, // –®–∏—Ä–∏–Ω–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ –∫–∞–±–∏–Ω–µ—Ç–∞
                    h: 80  // –í—ã—Å–æ—Ç–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∞ –∫–∞–±–∏–Ω–µ—Ç–∞
                    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: SVG paths –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ñ–æ—Ä–º –∫–æ–º–Ω–∞—Ç
                    // –ü–†–ò–ú–ï–†: shape: "M50,50 L150,50 L150,130 L50,130 Z"
                }
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã –ø–µ—Ä–≤–æ–≥–æ —ç—Ç–∞–∂–∞
                // –ü–†–ò–ú–ï–†: –∫–∞–±–∏–Ω–µ—Ç —Ñ–∏–∑–∏–∫–∏, —Ö–∏–º–∏–∏, –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, —Å—Ç–æ–ª–æ–≤–∞—è
            ]
        }
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ —ç—Ç–∞–∂–∏ 2, 3, 4 —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –∫–∞–±–∏–Ω–µ—Ç–∞–º–∏
        // –ü–†–ò–ú–ï–†: —Å–ø–æ—Ä—Ç–∑–∞–ª, –∞–∫—Ç–æ–≤—ã–π –∑–∞–ª, –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏, –∫–∞–±–∏–Ω–µ—Ç—ã —è–∑—ã–∫–æ–≤
    ]
};

// –°–æ–±—ã—Ç–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è–º–∏, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
// –ü–†–ò–ú–ï–†: Google Calendar API, –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è, –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–æ–±—ã—Ç–∏—è
const calendarEvents = [
    {
        date: "2025-09-01", // –î–∞—Ç–∞ —Å–æ–±—ã—Ç–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
        // –ü–†–ò–ú–ï–†: startTime: "09:00", endTime: "10:30", timezone: "Europe/Moscow"
        
        title: "–î–µ–Ω—å –∑–Ω–∞–Ω–∏–π", // –ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å–æ–±—ã—Ç–∏–π, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã
        // –ü–†–ò–ú–ï–†: category: "holiday", priority: "high", attendees: [...]
        
        type: "holiday", // –¢–∏–ø —Å–æ–±—ã—Ç–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–ª–µ–µ –≥—Ä–∞–Ω—É–ª—è—Ä–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
        // –ü–†–ò–ú–ï–†: type: { main: "holiday", sub: "academic", level: "school" }
        
        icon: "üéì" // –ò–∫–æ–Ω–∫–∞ —Å–æ–±—ã—Ç–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ü–≤–µ—Ç–æ–≤–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        // –ü–†–ò–ú–ï–†: color: "#ff6b35", image: "/events/knowledge-day.jpg"
    }
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ —Å–æ–±—ã—Ç–∏–π
    // –ü–†–ò–ú–ï–†–´: –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã, –æ–ª–∏–º–ø–∏–∞–¥—ã, —ç–∫—Å–∫—É—Ä—Å–∏–∏, –∫–∞–Ω–∏–∫—É–ª—ã
];

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ–∫—É—â–µ–π –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
// –ü–†–ò–ú–ï–†: quizState = { subject: null, questions: [], currentIndex: 0, answers: [], startTime: null }
let currentQuiz = null; // –î–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–π –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
let currentQuestionIndex = 0; // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
let quizAnswers = []; // –ú–∞—Å—Å–∏–≤ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
let quizTimer = null; // –¢–∞–π–º–µ—Ä –¥–ª—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
let timeLeft = 30; // –û—Å—Ç–∞–≤—à–µ–µ—Å—è –≤—Ä–µ–º—è –Ω–∞ –≤–æ–ø—Ä–æ—Å (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, lazy loading
// –ü–†–ò–ú–ï–†: —Ä–∞–∑–¥–µ–ª–∏—Ç–µ –Ω–∞ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö, UI, –ª–æ–≥–∏–∫–∏
document.addEventListener('DOMContentLoaded', function() { // –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
    // –°–æ–±—ã—Ç–∏–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–≥–¥–∞ HTML –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≥—Ä—É–∂–µ–Ω
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞
    // –ü–†–ò–ú–ï–†: if (!window.in-memory (sandbox)) { showCompatibilityWarning(); }
    
    console.log('üõ´ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ "–°–∞–º–æ–ª—ë—Ç –∑–Ω–∞–Ω–∏–π" –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è...');
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
    // –ü–†–ò–ú–ï–†: logger.info('App starting', { timestamp: Date.now(), userAgent: navigator.userAgent });
    
    initializeApp(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    initByPage(); // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ª–æ–≥–∏–∫—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    registerServiceWorker(); // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Service Worker –¥–ª—è PWA (–≤ try/catch)
    // –í—ã–∑–æ–≤ –≥–ª–∞–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    // –ü–†–ò–ú–ï–†: try { initializeApp(); } catch(e) { handleInitError(e); }
});

// –ì–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–±–µ–π—Ç–µ –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
// –ü–†–ò–ú–ï–†: initUser(), initUI(), initData(), initEventListeners()
function initializeApp() {
    console.log('üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
    // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ö–æ–¥–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∑–∞–≥—Ä—É–∑–∫–∏
    // –ü–†–ò–ú–ï–†: updateLoadingProgress(10, '–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö...');
    
    loadUserData();
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ –æ–±–ª–∞–∫–∞
    // –ü–†–ò–ú–ï–†: await loadUserDataFromCloud();
    
    updateUserInterface();
    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–æ–≥–ª–∞—Å–Ω–æ –¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    // –ü–†–ò–ú–ï–†: createReactiveBindings(); observeDataChanges();
    
    initializeSubjectProgress();
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
    // –ü–†–ò–ú–ï–†: migrateDataIfNeeded(userData.version, CURRENT_VERSION);
    
    updateDailyStreak();
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Å—Ç—Ä–∏–∫
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–µ—Ä–≤–µ—Ä-—Å–∞–π–¥ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä–∏–∫–æ–≤
    // –ü–†–ò–ú–ï–†: validateStreakWithServer();
    
    console.log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!');
    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—É—Å–∫–æ–≤
    // –ü–†–ò–ú–ï–†: analytics.track('app_initialized', { userLevel: userData.level });
}

// –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ in-memory (sandbox)
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –¥–∞–Ω–Ω—ã—Ö
// –ü–†–ò–ú–ï–†: in-memory (sandbox), in-memory session (sandbox), IndexedDB, –æ–±–ª–∞—á–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
function loadUserData() { // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–±–µ–∑ in-memory (sandbox) –∏–∑-–∑–∞ sandbox)
    console.log('üìö –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ...');
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∑–∞–≥—Ä—É–∑–∫–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
    // –ü–†–ò–ú–ï–†: logger.debug('Loading user data from in-memory (sandbox)');
    
    try {
        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: retry –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏ —Å–±–æ—è—Ö
        // –ü–†–ò–ú–ï–†: –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ–±–∞–≤—å—Ç–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
        
        const savedData = window.__MEM_STORE ? JSON.stringify(window.__MEM_STORE) : null; // –ò—Å–ø–æ–ª—å–∑—É–µ–º in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤–º–µ—Å—Ç–æ in-memory (sandbox)
        // –ü–æ–ª—É—á–∞–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–ª—é—á—É
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª—é—á–µ–π
        // –ü–†–ò–ú–ï–†: in-memory (sandbox).getItem(`schoolApp_userData_v${DATA_VERSION}`);
        
        if (savedData) {
            // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞–π–¥–µ–Ω—ã, –∑–∞–≥—Ä—É–∂–∞–µ–º –∏—Ö
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
            // –ü–†–ò–ú–ï–†: validateDataIntegrity(parsedData);
            
            const parsedData = JSON.parse(savedData);
            // –ü–∞—Ä—Å–∏–º JSON —Å—Ç—Ä–æ–∫—É –≤ –æ–±—ä–µ–∫—Ç
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
            // –ü–†–ò–ú–ï–†: try { parsedData = JSON.parse(savedData); } catch { useDefaultData(); }
            
            // –û–±—ä–µ–¥–∏–Ω—è–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å —Ç–µ–∫—É—â–∏–º–∏ (–Ω–∞ —Å–ª—É—á–∞–π –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π)
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–∏–≥—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö
            // –ü–†–ò–ú–ï–†: migrateUserData(parsedData, currentSchema);
            userData = { ...userData, ...parsedData };
            
            console.log('üìã –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', userData);
            // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å –≤—ã–≤–æ–¥–æ–º –¥–∞–Ω–Ω—ã—Ö
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–µ –≤—ã–≤–æ–¥–∏—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–≥
            // –ü–†–ò–ú–ï–†: console.log('Data loaded for user:', userData.username);
        } else {
            console.log('üìù –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é');
            // –°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
            // –ü–†–ò–ú–ï–†: showWelcomeWizard(); trackNewUser();
            
            saveUserData(); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø–∞–º—è—Ç—å
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
            // –ü–†–ò–ú–ï–†: scheduleDataSave(); // —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥
        }
    } catch (error) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
        // –ü–†–ò–ú–ï–†: if (error instanceof SyntaxError) { handleCorruptedData(); }
        
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:', error);
        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
        // –ü–†–ò–ú–ï–†: errorReporter.captureException(error, { context: 'user_data_loading' });
        
        console.log('üîÑ –ò—Å–ø–æ–ª—å–∑—É–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ –ø–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω—è–µ–º');
        // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ fallback –∫ –¥–∞–Ω–Ω—ã–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–ø—ã—Ç–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–∑ –±—ç–∫–∞–ø–∞
        // –ü–†–ò–ú–ï–†: tryRestoreFromBackup() || useDefaultData();
        
        saveUserData();
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —á–∏—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    }
}

// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ in-memory (sandbox)
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–∞—Ç—á–∏–Ω–≥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π, —Å–∂–∞—Ç–∏–µ –¥–∞–Ω–Ω—ã—Ö
// –ü–†–ò–ú–ï–†: debounced —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∫–æ–º–ø—Ä–µ—Å—Å–∏—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
function saveUserData() { // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
    console.log('üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ...');
    // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ –Ω–∞—á–∞–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    // –ü–†–ò–ú–ï–†: showSaveIndicator(); // "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ..."
    
    try {
        // –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º –≤ try-catch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –≤ storage
        // –ü–†–ò–ú–ï–†: if (getStorageUsage() > STORAGE_LIMIT) { cleanupOldData(); }
        
        const dataToSave = JSON.stringify(userData); // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –æ–±—ä–µ–∫—Ç –≤ JSON —Å—Ç—Ä–æ–∫—É
        window.__MEM_STORE = JSON.parse(dataToSave); // –ö–ª–∞–¥—ë–º –∫–ª–æ–Ω –≤ –≥–ª–æ–±–∞–ª—å–Ω—É—é –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–º—è—Ç–∏
        console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –≤ –ø–∞–º—è—Ç–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –æ–±–ª–∞–∫–æ–º
        // –ü–†–ò–ú–ï–†: syncWithCloud(userData); // –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
    } catch (error) {
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –æ—à–∏–±–æ–∫
        // –ü–†–ò–ú–ï–†: if (error.name === 'QuotaExceededError') { cleanupStorage(); }
        
        console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
        // –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–± –æ—à–∏–±–∫–µ
        // –ü–†–ò–ú–ï–†: showNotification('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å', 'error');
        
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–ø—ã—Ç–∫–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        // –ü–†–ò–ú–ï–†: saveCriticalDataOnly(); // —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ —É—Ä–æ–≤–µ–Ω—å –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    }
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤
// –ü–†–ò–ú–ï–†: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏—Ö –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
function initializeSubjectProgress() {
    console.log('üìä –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º...');
    // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    // –ü–†–ò–ú–ï–†: updateProgressBar('–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤...', 30);
    
    // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º –∏ —Å–æ–∑–¥–∞—ë–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: subjects.forEach(async (subject) => { await initSubjectProgress(subject); });
    subjects.forEach(subject => {
        // –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        // –ü–†–ò–ú–ï–†: validateSubjectProgress(userData.subjectProgress[subject.name]);
        
        if (!userData.subjectProgress[subject.name]) {
            // –ï—Å–ª–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –Ω–µ—Ç, —Å–æ–∑–¥–∞—ë–º –Ω–∞—á–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            // –ü–†–ò–ú–ï–†: { correct: 0, total: 0, topics: {}, timeSpent: 0, lastAccessed: null }
            
            userData.subjectProgress[subject.name] = {
                correct: 0, // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ç–∏–ø–∞–º –≤–æ–ø—Ä–æ—Å–æ–≤
                // –ü–†–ò–ú–ï–†: correctByType: { 'multiple-choice': 0, 'true-false': 0 }
                
                total: 0 // –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
                // –ü–†–ò–ú–ï–†: totalByDifficulty: { easy: 0, medium: 0, hard: 0 }
            };
            
            console.log(`üìà –°–æ–∑–¥–∞–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–∞: ${subject.name}`);
            // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–∞
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            // –ü–†–ò–ú–ï–†: analytics.track('subject_initialized', { subject: subject.name });
        }
    });
    
    console.log('‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –≤—Å–µ–º –ø—Ä–µ–¥–º–µ—Ç–∞–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
    // –ü–†–ò–ú–ï–†: validateAllSubjectProgress(); // –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Å—Ç—Ä–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —É—á—ë—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω, –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–≤, –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
// –ü–†–ò–ú–ï–†: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å —Å–≤–æ–π "–¥–µ–Ω—å" (–Ω–æ—á–Ω–∞—è —Å–º–µ–Ω–∞)
function updateDailyStreak() {
    console.log('üî• –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Å—Ç—Ä–∏–∫...');
    // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å—Ç—Ä–∏–∫–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–∏–∑—É–∞–ª—å–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä–∏–∫–∞
    // –ü–†–ò–ú–ï–†: showStreakCheckAnimation();
    
    const today = new Date().toDateString();
    // –ü–æ–ª—É—á–∞–µ–º —Å–µ–≥–æ–¥–Ω—è—à–Ω—é—é –¥–∞—Ç—É –≤ —Å—Ç—Ä–æ–∫–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —É—á—ë—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–æ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –ü–†–ò–ú–ï–†: const today = new Date().toLocaleDateString(userData.locale);
    
    const lastLogin = userData.lastLoginDate;
    // –ü–æ–ª—É—á–∞–µ–º –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: lastActivity —Å –≤—Ä–µ–º–µ–Ω–µ–º –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö
    
    if (lastLogin) {
        // –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –≤—Ö–æ–¥–µ
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏ –¥–∞—Ç—ã
        // –ü–†–ò–ú–ï–†: if (isValidDate(lastLogin)) { ... }
        
        const lastLoginDate = new Date(lastLogin).toDateString();
        // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —Å—Ç—Ä–æ–∫–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—Ç –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
        // –ü–†–ò–ú–ï–†: normalizeDate(lastLogin, userData.timezone);
        
        const yesterday = new Date();
        yesterday.setDate(yesterday.getDate() - 1);
        const yesterdayString = yesterday.toDateString();
        // –í—ã—á–∏—Å–ª—è–µ–º –≤—á–µ—Ä–∞—à–Ω—é—é –¥–∞—Ç—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∏–∫–∞
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —É—á—ë—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö –¥–Ω–µ–π –∏ –∫–∞–Ω–∏–∫—É–ª
        // –ü–†–ò–ú–ï–†: getLastActiveDay(userData.scheduleSettings);
        
        if (lastLoginDate === today) {
            // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∑–∞—Ö–æ–¥–∏–ª —Å–µ–≥–æ–¥–Ω—è
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –≤—Ö–æ–¥–∞
            // –ü–†–ò–ú–ï–†: if (hasActivityToday(userData.activityLog)) { ... }
            
            console.log('üëã –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω —Å–µ–≥–æ–¥–Ω—è');
            // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ –¥–µ–Ω—å
            // –ü–†–ò–ú–ï–†: showTodayActivity(); // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–∫—Ç–æ—Ä–∏–Ω, –≤—Ä–µ–º—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
            
            return; // –ù–∏—á–µ–≥–æ –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ–º
        } else if (lastLoginDate === yesterdayString) {
            // –ï—Å–ª–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—Ö–æ–¥ –±—ã–ª –≤—á–µ—Ä–∞ - –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º —Å—Ç—Ä–∏–∫
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
            // –ü–†–ò–ú–ï–†: if (hadMeaningfulActivity(yesterday)) { continueStreak(); }
            
            userData.dailyStreak += 1;
            console.log(`üî• –°—Ç—Ä–∏–∫ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è! –î–Ω–µ–π –ø–æ–¥—Ä—è–¥: ${userData.dailyStreak}`);
            // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ —Å—Ç—Ä–∏–∫–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∏–º–∞—Ü–∏—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è —Å—Ç—Ä–∏–∫–∞
            // –ü–†–ò–ú–ï–†: animateStreakIncrease(userData.dailyStreak);
        } else {
            // –ï—Å–ª–∏ –ø–µ—Ä–µ—Ä—ã–≤ –±–æ–ª—å—à–µ –¥–Ω—è - —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç—Ä–∏–∫
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ª—å–≥–æ—Ç–Ω—ã–µ –¥–Ω–∏, "–∑–∞–º–æ—Ä–æ–∑–∫–∞" —Å—Ç—Ä–∏–∫–∞
            // –ü–†–ò–ú–ï–†: if (userData.streakFreezesLeft > 0) { useStreakFreeze(); }
            
            console.log('üíî –°—Ç—Ä–∏–∫ –ø—Ä–µ—Ä–≤–∞–Ω, –Ω–∞—á–∏–Ω–∞–µ–º –∑–∞–Ω–æ–≤–æ');
            // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ —Å–±—Ä–æ—Å–µ —Å—Ç—Ä–∏–∫–∞
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º –Ω–∞—á–∞–ª–µ
            // –ü–†–ò–ú–ï–†: showMotivationalMessage('–ö–∞–∂–¥—ã–π –¥–µ–Ω—å - –Ω–æ–≤–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å!');
            
            userData.dailyStreak = 1;
        }
    } else {
        // –î–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞—á–∏–Ω–∞–µ–º —Å—Ç—Ä–∏–∫ —Å 1
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Å—Ç—Ä–∏–∫–∞—Ö
        // –ü–†–ò–ú–ï–†: showStreakIntroduction(); // –æ–±—ä—è—Å–Ω–∏—Ç—å —á—Ç–æ —Ç–∞–∫–æ–µ —Å—Ç—Ä–∏–∫–∏
        
        console.log('üåü –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–≤—ã–π –¥–µ–Ω—å —Å—Ç—Ä–∏–∫–∞!');
        userData.dailyStreak = 1;
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∞—Ç—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—Ö–æ–¥–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –º–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
    // –ü–†–ò–ú–ï–†: userData.lastLoginTimestamp = Date.now();
    userData.lastLoginDate = today;
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: debouncedSave(userData); // —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–±–æ–ª—å—à—É—é –∑–∞–¥–µ—Ä–∂–∫—É
    saveUserData();
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å–æ —Å—Ç—Ä–∏–∫–∞–º–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –≤–∏–¥–æ–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    // –ü–†–ò–ú–ï–†: checkAllAchievements(['streak', 'daily', 'consistency']);
    checkAchievements();
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å–æ–≥–ª–∞—Å–Ω–æ –¥–∞–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–µ–∞–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
// –ü–†–ò–ú–ï–†: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–µ–π –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –¥–∞–Ω–Ω—ã—Ö
function updateUserInterface() {
    console.log('üé® –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...');
    // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    // –ü–†–ò–ú–ï–†: showUIUpdateProgress();
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: const usernameElement = document.getElementById('username'); if (usernameElement) { ... }
    const usernameElement = document.getElementById('username');
    if (usernameElement) {
        usernameElement.textContent = userData.username;
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–∫—Å—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∏–º–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
        // –ü–†–ò–ú–ï–†: animateTextChange(usernameElement, userData.username);
        
        console.log('üë§ –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ:', userData.username);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —É—Ä–æ–≤–Ω—è
    // –ü–†–ò–ú–ï–†: —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞, –∏–∫–æ–Ω–∫–∏, –∞–Ω–∏–º–∞—Ü–∏–∏ —É—Ä–æ–≤–Ω—è
    const levelElement = document.getElementById('userLevel');
    if (levelElement) {
        levelElement.textContent = userData.level;
        console.log('üéØ –£—Ä–æ–≤–µ–Ω—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª—ë–Ω:', userData.level);
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
        // –ü–†–ò–ú–ï–†: updateLevelProgress(userData.totalXP, getXPForLevel(userData.level + 1));
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ–ø—ã—Ç–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –æ–ø—ã—Ç–∞
    // –ü–†–ò–ú–ï–†: animateNumber(xpElement, oldXP, userData.totalXP, 1000);
    const xpElement = document.getElementById('userXP');
    if (xpElement) {
        xpElement.textContent = userData.totalXP;
        console.log('‚≠ê –û–ø—ã—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª—ë–Ω:', userData.totalXP);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω
    // –ü–†–ò–ú–ï–†: –ø–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—à–Ω–æ—Å—Ç—å, —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è, –ª—é–±–∏–º—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã
    const quizzesElement = document.getElementById('quizzesTaken');
    if (quizzesElement) {
        quizzesElement.textContent = userData.quizzesTaken;
        console.log('üìö –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∏–∫—Ç–æ—Ä–∏–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–æ:', userData.quizzesTaken);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
    // –ü–†–ò–ú–ï–†: showAchievementsByCategory(); highlightRecentAchievements();
    const achievementsElement = document.getElementById('achievementsCount');
    if (achievementsElement) {
        achievementsElement.textContent = userData.achievements.length;
        console.log('üèÜ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω–æ:', userData.achievements.length);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –∑–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–∏—Å—Ç–µ–º–∞ –∑–≤–∞–Ω–∏–π —Å –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞–º–∏
    // –ü–†–ò–ú–ï–†: ranks = ["–ö—É—Ä—Å–∞–Ω—Ç", "–ü–∏–ª–æ—Ç", "–ö–∞–ø–∏—Ç–∞–Ω", "–ê—Å", "–õ–µ–≥–µ–Ω–¥–∞"]
    const rankElement = document.getElementById('userRank');
    if (rankElement) {
        const rank = getUserRank(userData.level);
        rankElement.textContent = rank;
        console.log('üéñÔ∏è –ó–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–æ:', rank);
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∏–º–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –∑–≤–∞–Ω–∏—è
        // –ü–†–ò–ú–ï–†: if (rank !== oldRank) { animateRankPromotion(rank); }
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–µ–ª–∏–Ω–µ–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏
    // –ü–†–ò–ú–ï–†: —É—á—ë—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –æ–ø—ã—Ç–∞ —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Å–∞–º–∏
    updateProgressBar();
    
    console.log('‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω–æ–≤–ª—ë–Ω');
    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    // –ü–†–ò–ú–ï–†: validateUIConsistency(); // –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ UI –¥–∞–Ω–Ω—ã–º
}

// –§—É–Ω–∫—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ —É—Ä–æ–≤–Ω—é
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–≤–∞–Ω–∏–π —Å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏
// –ü–†–ò–ú–ï–†: —É—á—ë—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —É—Ä–æ–≤–Ω—è, –Ω–æ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∫–∞—á–µ—Å—Ç–≤–∞ –æ—Ç–≤–µ—Ç–æ–≤
function getUserRank(level) {
    // –ú–∞—Å—Å–∏–≤ –∑–≤–∞–Ω–∏–π –≤ –∞–≤–∏–∞—Ü–∏–æ–Ω–Ω–æ–π —Ç–µ–º–∞—Ç–∏–∫–µ
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–≤–∞–Ω–∏—è
    // –ü–†–ò–ú–ï–†: –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ JSON —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–≤–æ–¥–∞–º–∏
    const ranks = [
        "–ö—É—Ä—Å–∞–Ω—Ç",    // –£—Ä–æ–≤–µ–Ω—å 1-2
        "–ü–∏–ª–æ—Ç",      // –£—Ä–æ–≤–µ–Ω—å 3-5
        "–®—Ç—É—Ä–º–∞–Ω",    // –£—Ä–æ–≤–µ–Ω—å 6-8
        "–ö–∞–ø–∏—Ç–∞–Ω",    // –£—Ä–æ–≤–µ–Ω—å 9-12
        "–ê—Å",         // –£—Ä–æ–≤–µ–Ω—å 13-16
        "–õ–µ–≥–µ–Ω–¥–∞"     // –£—Ä–æ–≤–µ–Ω—å 17+
    ];
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∑–≤–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ —É—Ä–æ–≤–Ω—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∑–≤–∞–Ω–∏—è
    // –ü–†–ò–ú–ï–†: if (level >= 17 && hasSpecialAchievements()) return "–õ–µ–≥–µ–Ω–¥–∞";
    if (level >= 17) return ranks[5];
    if (level >= 13) return ranks[4];
    if (level >= 9) return ranks[3];
    if (level >= 6) return ranks[2];
    if (level >= 3) return ranks[1];
    return ranks[0];
}

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
// –ü–†–ò–ú–ï–†: –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º, –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º, —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
function updateProgressBar() {
    console.log('üìä –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä...');
    // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ–± –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
    // –ü–†–ò–ú–ï–†: console.log('Updating level progress bar');
    
    const progressFill = document.getElementById('progressFill');
    if (!progressFill) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –µ—Å–ª–∏ –æ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
        // –ü–†–ò–ú–ï–†: createProgressBarIfMissing();
        
        console.log('‚ö†Ô∏è –≠–ª–µ–º–µ–Ω—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
    }
    
    // –í—ã—á–∏—Å–ª—è–µ–º –æ–ø—ã—Ç, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ —É—Ä–æ–≤–Ω—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: –∫—ç—à –∑–Ω–∞—á–µ–Ω–∏–π XP –¥–ª—è —É—Ä–æ–≤–Ω–µ–π —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑
    const currentLevelXP = getXPForLevel(userData.level);
    const nextLevelXP = getXPForLevel(userData.level + 1);
    const progressXP = userData.totalXP - currentLevelXP;
    const neededXP = nextLevelXP - currentLevelXP;
    
    // –í—ã—á–∏—Å–ª—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–ª–∞–≤–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–∞
    // –ü–†–ò–ú–ï–†: –∞–Ω–∏–º–∞—Ü–∏—è –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –∫ –Ω–æ–≤–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é
    const progressPercent = Math.min((progressXP / neededXP) * 100, 100);
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –∫ —à–∏—Ä–∏–Ω–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: CSS –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: progressFill.style.transition = 'width 0.5s ease-out';
    progressFill.style.width = progressPercent + '%';
    
    console.log(`üìà –ü—Ä–æ–≥—Ä–µ—Å—Å: ${progressXP}/${neededXP} XP (${progressPercent.toFixed(1)}%)`);
    // –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    // –ü–†–ò–ú–ï–†: analytics.track('level_progress', { level: userData.level, progress: progressPercent });
}

// –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ –æ–ø—ã—Ç–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
// –ü–†–ò–ú–ï–†: –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã –¥–ª—è —É—á–µ–±–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ
function getXPForLevel(level) {
    // –§–æ—Ä–º—É–ª–∞: –∫–∞–∂–¥—ã–π —É—Ä–æ–≤–µ–Ω—å —Ç—Ä–µ–±—É–µ—Ç level¬≤ √ó 100 –æ–ø—ã—Ç–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º—É–ª—ã –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏
    // –ü–†–ò–ú–ï–†: –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    
    // –£—Ä–æ–≤–µ–Ω—å 1 = 0 –æ–ø—ã—Ç–∞ (—Å—Ç–∞—Ä—Ç–æ–≤—ã–π)
    // –£—Ä–æ–≤–µ–Ω—å 2 = 100 –æ–ø—ã—Ç–∞
    // –£—Ä–æ–≤–µ–Ω—å 3 = 400 –æ–ø—ã—Ç–∞
    // –£—Ä–æ–≤–µ–Ω—å 4 = 900 –æ–ø—ã—Ç–∞ –∏ —Ç.–¥.
    return (level - 1) * (level - 1) * 100;
    
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã
    // –ü–†–ò–ú–ï–†: return Math.floor(100 * Math.pow(level - 1, 1.5) + 50 * (level - 1));
}

// –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å—á—ë—Ç–∞ —É—Ä–æ–≤–Ω—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—ã—Ç–∞
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –æ–±—Ä–∞—Ç–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ—Ç getXPForLevel
// –ü–†–ò–ú–ï–†: –ø–æ–∏—Å–∫ —É—Ä–æ–≤–Ω—è —á–µ—Ä–µ–∑ –±–∏–Ω–∞—Ä–Ω—ã–π –ø–æ–∏—Å–∫ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ñ–æ—Ä–º—É–ª
function calculateLevel(xp) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ–æ—Ä–º—É–ª—É: level = floor(sqrt(xp/100)) + 1
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ñ–æ—Ä–º—É–ª—ã
    // –ü–†–ò–ú–ï–†: –≤–∞–ª–∏–¥–∞—Ü–∏—è —á—Ç–æ calculateLevel(getXPForLevel(level)) === level
    
    return Math.floor(Math.sqrt(xp / 100)) + 1;
    
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±—Ä–∞–±–æ—Ç–∫–∞ edge cases
    // –ü–†–ò–ú–ï–†: if (xp < 0) return 1; if (xp > MAX_XP) return MAX_LEVEL;
}

// –ó–∞–ø—É—Å–∫ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
// –ü–†–ò–ú–ï–†: —Ä–µ–∂–∏–º—ã: –æ–±—É—á–µ–Ω–∏–µ, —ç–∫–∑–∞–º–µ–Ω, —Ç—É—Ä–Ω–∏—Ä, –º–∞—Ä–∞—Ñ–æ–Ω
function startQuiz(subjectName) {
    console.log(`üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –≤–∏–∫—Ç–æ—Ä–∏–Ω—É –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É: ${subjectName}`);
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—á–∞–ª–∞ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: analytics.track('quiz_started', { subject: subjectName, userLevel: userData.level });
    
    // –ù–∞—Ö–æ–¥–∏–º –ø—Ä–µ–¥–º–µ—Ç –≤ –º–∞—Å—Å–∏–≤–µ subjects
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Map –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –ø–æ –∏–º–µ–Ω–∏
    const subject = subjects.find(s => s.name === subjectName);
    
    if (!subject) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–∞
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
        // –ü–†–ò–ú–ï–†: tryLoadSubjectFromServer(subjectName);
        
        console.error(`‚ùå –ü—Ä–µ–¥–º–µ—Ç "${subjectName}" –Ω–µ –Ω–∞–π–¥–µ–Ω`);
        alert(`–ü—Ä–µ–¥–º–µ—Ç "${subjectName}" –Ω–µ –Ω–∞–π–¥–µ–Ω!`);
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∫—Ä–∞—Å–∏–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤–º–µ—Å—Ç–æ alert
        // –ü–†–ò–ú–ï–†: showNotification(`–ü—Ä–µ–¥–º–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω: ${subjectName}`, 'error');
        return;
    }
    
    if (!subject.questions || subject.questions.length === 0) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –ø—Ä–µ–¥–º–µ—Ç–µ
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∑–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é
        // –ü–†–ò–ú–ï–†: await loadQuestionsForSubject(subjectName);
        
        console.error(`‚ùå –í –ø—Ä–µ–¥–º–µ—Ç–µ "${subjectName}" –Ω–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤`);
        alert(`–í –ø—Ä–µ–¥–º–µ—Ç–µ "${subjectName}" –ø–æ–∫–∞ –Ω–µ—Ç –≤–æ–ø—Ä–æ—Å–æ–≤!`);
        return;
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±—ä–µ–∫—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
    // –ü–†–ò–ú–ï–†: quizState = { subject, questions: [...], settings: {...} };
    currentQuiz = subject;
    currentQuestionIndex = 0;
    quizAnswers = [];
    timeLeft = 30; // —Å–µ–∫—É–Ω–¥ –Ω–∞ –≤–æ–ø—Ä–æ—Å
    
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
    // –ü–†–ò–ú–ï–†: animatePageTransition('quiz');
    window.location.href = `quiz.html?subject=${encodeURIComponent(subjectName)}`;
    
    console.log('‚úÖ –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã');
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: preload —Å–ª–µ–¥—É—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
    // –ü–†–ò–ú–ï–†: preloadQuizAssets(subject.questions);
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≤–∏–∫—Ç–æ—Ä–∏–Ω–µ
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤, —á–∞—Å—Ç–∏—á–Ω—ã–µ –±–∞–ª–ª—ã
// –ü–†–ò–ú–ï–†: –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä, –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞, —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ, –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ
function checkAnswer(selectedIndex, correctIndex, points) {
    console.log(`ü§î –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç: –≤—ã–±—Ä–∞–Ω ${selectedIndex}, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ${correctIndex}`);
    // –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ—Ç–≤–µ—Ç–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–ø—Ä–æ—Å–æ–≤
    // –ü–†–ò–ú–ï–†: trackAnswerTime(questionStartTime, Date.now());
    
    const isCorrect = selectedIndex === correctIndex;
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–µ—á—ë—Ç–∫–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —á–∞—Å—Ç–∏—á–Ω—ã—Ö –±–∞–ª–ª–æ–≤
    // –ü–†–ò–ú–ï–†: calculatePartialScore(selectedAnswers, correctAnswers);
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Ç–≤–µ—Ç–µ
    // –ü–†–ò–ú–ï–†: { questionId, answer, isCorrect, timeSpent, attempts, hints }
    quizAnswers.push({
        questionIndex: currentQuestionIndex,
        selectedAnswer: selectedIndex,
        correctAnswer: correctIndex,
        isCorrect: isCorrect,
        points: isCorrect ? points : 0,
        timestamp: Date.now() // –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
        // timeSpent: answerTime, difficulty: questionDifficulty
    });
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    // –ü–†–ò–ú–ï–†: updateRealtimeStats(); broadcastProgress();
    if (isCorrect) {
        userData.correctAnswers++;
        userData.totalXP += points;
        console.log(`‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! +${points} XP`);
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –Ω–∞–≥—Ä–∞–¥
        // –ü–†–ò–ú–ï–†: addBonusReward(questionDifficulty, streakLength);
    } else {
        userData.wrongAnswers++;
        console.log(`‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: ${correctIndex}`);
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ –æ—à–∏–±–∫–∞—Ö
        // –ü–†–ò–ú–ï–†: suggestStudyMaterial(questionTopic);
    }
    
    // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
    // –ü–†–ò–ú–ï–†: const oldLevel = userData.level; checkLevelUp(oldLevel);
    const newLevel = calculateLevel(userData.totalXP);
    if (newLevel > userData.level) {
        console.log(`üéâ –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è! ${userData.level} ‚Üí ${newLevel}`);
        userData.level = newLevel;
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è
        // –ü–†–ò–ú–ï–†: showLevelUpAnimation(userData.level);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —Ç–µ–º–∞–º
    // –ü–†–ò–ú–ï–†: updateTopicProgress(questionTopic, isCorrect);
    const subjectName = currentQuiz.name;
    if (!userData.subjectProgress[subjectName]) {
        userData.subjectProgress[subjectName] = { correct: 0, total: 0 };
    }
    
    userData.subjectProgress[subjectName].total++;
    if (isCorrect) {
        userData.subjectProgress[subjectName].correct++;
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–∞—Ç—á–∏–Ω–≥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: queueSave(userData); // —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
    saveUserData();
    
    return isCorrect;
    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ UI
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±—ä–µ–∫—Ç —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
    // –ü–†–ò–ú–ï–†: return { isCorrect, earnedXP: points, newLevel, feedback: "..." };
}

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
// –ü–†–ò–ú–ï–†: –∞–Ω–∞–ª–∏–∑ —Å–ª–∞–±—ã—Ö –º–µ—Å—Ç, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
function completeQuiz() {
    console.log('üèÅ –ó–∞–≤–µ—Ä—à–∞–µ–º –≤–∏–∫—Ç–æ—Ä–∏–Ω—É...');
    // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: showResultsCalculationScreen();
    
    if (!currentQuiz || quizAnswers.length === 0) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–∑ in-memory (sandbox)
        // –ü–†–ò–ú–ï–†: tryRestoreQuizState() || redirectToHomePage();
        
        console.error('‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –≤–∏–∫—Ç–æ—Ä–∏–Ω–µ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è');
        return;
    }
    
    // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å—á—ë—Ç–∞ –±–∞–ª–ª–æ–≤
    // –ü–†–ò–ú–ï–†: —É—á—ë—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏, —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –±–æ–Ω—É—Å–æ–≤, —à—Ç—Ä–∞—Ñ–æ–≤
    const correctCount = quizAnswers.filter(answer => answer.isCorrect).length;
    const totalQuestions = quizAnswers.length;
    const percentage = Math.round((correctCount / totalQuestions) * 100);
    const totalPoints = quizAnswers.reduce((sum, answer) => sum + answer.points, 0);
    
    console.log(`üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã:`);
    console.log(`   –ü—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ${correctCount}/${totalQuestions} (${percentage}%)`);
    console.log(`   –ù–∞–±—Ä–∞–Ω–æ –æ—á–∫–æ–≤: ${totalPoints}`);
    console.log(`   –ü—Ä–µ–¥–º–µ—Ç: ${currentQuiz.name}`);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–µ–¥–º–µ—Ç–∞–º
    // –ü–†–ò–ú–ï–†: updateDetailedStats(quizAnswers, currentQuiz);
    userData.quizzesTaken++;
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    // –ü–†–ò–ú–ï–†: checkAchievementsInRealtime(quizResults);
    checkAchievements();
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
    // –ü–†–ò–ú–ï–†: syncQuizResultsWithServer(quizResults);
    saveUserData();
    
    // –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω
    // –ü–†–ò–ú–ï–†: saveQuizToHistory(currentQuiz, quizAnswers);
    currentQuiz = null;
    currentQuestionIndex = 0;
    quizAnswers = [];
    
    console.log('‚úÖ –í–∏–∫—Ç–æ—Ä–∏–Ω–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–µ—Ä–µ—Ö–æ–¥ –∫ —ç–∫—Ä–∞–Ω—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: showQuizResults({ correctCount, totalQuestions, percentage, totalPoints });
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π, –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫
// –ü–†–ò–ú–ï–†: EventBus –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö, –æ—á–µ—Ä–µ–¥—å –ø—Ä–æ–≤–µ—Ä–æ–∫
function checkAchievements() {
    console.log('üèÜ –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è...');
    // –ò–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ –Ω–∞—á–∞–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏
    // –ü–†–ò–ú–ï–†: showAchievementCheckProgress();
    
    achievements.forEach(achievement => {
        // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
        // –ü–†–ò–ú–ï–†: Promise.all(achievements.map(checkSingleAchievement));
        
        if (userData.achievements.includes(achievement.id)) {
            // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —É–∂–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ç–æ—Ä—è–µ–º—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
            // –ü–†–ò–ú–ï–†: if (achievement.repeatable) { checkRepeatableAchievement(achievement); }
            return;
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ª–æ–≤–∏–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–ª–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–∞–≤–Ω—ã–µ —É—Å–ª–æ–≤–∏—è
        // –ü–†–ò–ú–ï–†: evaluateComplexCondition(achievement.condition, userData);
        let conditionMet = false;
        
        switch (achievement.condition.type) {
            case 'quizzes':
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö –≤–∏–∫—Ç–æ—Ä–∏–Ω
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —É—á—ë—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
                // –ü–†–ò–ú–ï–†: userData.quizzesTaken >= count && averageScore >= threshold
                conditionMet = userData.quizzesTaken >= achievement.condition.count;
                break;
                
            case 'subject_correct':
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ —Ç–µ–º–∞–º –≤–Ω—É—Ç—Ä–∏ –ø—Ä–µ–¥–º–µ—Ç–∞
                // –ü–†–ò–ú–ï–†: getTopicProgress(subject, topic).correct >= count
                const subjectProgress = userData.subjectProgress[achievement.condition.subject];
                if (subjectProgress) {
                    conditionMet = subjectProgress.correct >= achievement.condition.count;
                }
                break;
                
            case 'perfect_score':
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —É—á—ë—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤–∏–∫—Ç–æ—Ä–∏–Ω—ã
                // –ü–†–ò–ú–ï–†: perfectQuizzes.filter(quiz => quiz.difficulty >= 'medium').length >= count
                conditionMet = checkPerfectQuizzes() >= achievement.condition.count;
                break;
                
            case 'daily_streak':
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Å—Ç—Ä–∏–∫–∞
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã —Å—Ç—Ä–∏–∫–æ–≤
                // –ü–†–ò–ú–ï–†: weekdayStreak, weekendStreak, monthlyStreak
                conditionMet = userData.dailyStreak >= achievement.condition.count;
                break;
                
            case 'subjects_tried':
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
                // –ü–†–ò–ú–ï–†: subjects —Å —Ö–æ—Ç—è –±—ã 5 –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
                const subjectsWithProgress = Object.values(userData.subjectProgress)
                    .filter(progress => progress.total > 0).length;
                conditionMet = subjectsWithProgress >= achievement.condition.count;
                break;
                
            default:
                console.warn(`‚ö†Ô∏è –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ç–∏–ø —É—Å–ª–æ–≤–∏—è: ${achievement.condition.type}`);
                // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ —É—Å–ª–æ–≤–∏–π
                // –ü–†–ò–ú–ï–†: conditionMet = evaluateCustomCondition(achievement.condition);
        }
        
        if (conditionMet) {
            // –ï—Å–ª–∏ —É—Å–ª–æ–≤–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ, –≤—ã–¥–∞—ë–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω—Ç–∏-—á–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
            // –ü–†–ò–ú–ï–†: validateAchievementLegitimacy(achievement, userData);
            unlockAchievement(achievement.id);
        }
    });
    
    console.log('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫
    // –ü–†–ò–ú–ï–†: logAchievementCheckStats(checkedCount, unlockedCount);
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∏–¥–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π –≤–∏–∫—Ç–æ—Ä–∏–Ω
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–¥–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π
// –ü–†–ò–ú–ï–†: perfectQuizHistory —Å –¥–µ—Ç–∞–ª—è–º–∏ –∫–∞–∂–¥–æ–≥–æ –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è
function checkPerfectQuizzes() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –∑–∞–ø–∏—Å–∏ –æ–± –∏–¥–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è—Ö
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–¥–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π
    // –ü–†–ò–ú–ï–†: return userData.perfectQuizzes ? userData.perfectQuizzes.length : 0;
    
    // –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –µ—Å–ª–∏ –±—ã–ª–æ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ –∏–¥–µ–∞–ª—å–Ω–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–∞ –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
    if (userData.quizzesTaken > 0 && userData.correctAnswers > 0) {
        // –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ç–æ—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∏—Å—Ç–æ—Ä–∏—é –≤–∏–∫—Ç–æ—Ä–∏–Ω
        const accuracy = userData.correctAnswers / (userData.correctAnswers + userData.wrongAnswers);
        return accuracy === 1.0 ? 1 : 0; // —É–ø—Ä–æ—â–µ–Ω–∏–µ
    }
    return 0;
}

// –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∏–º–∞—Ü–∏–∏, –∑–≤—É–∫–∏, —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
// –ü–†–ò–ú–ï–†: –∞–Ω–∏–º–∞—Ü–∏—è —Ñ–µ–π–µ—Ä–≤–µ—Ä–∫–∞, –∑–≤—É–∫ —É—Å–ø–µ—Ö–∞, –ø–æ—Å—Ç –≤ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏
function unlockAchievement(achievementId) {
    console.log(`üéâ –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ: ${achievementId}`);
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    // –ü–†–ò–ú–ï–†: analytics.track('achievement_unlocked', { id: achievementId, userLevel: userData.level });
    
    // –ù–∞—Ö–æ–¥–∏–º –¥–∞–Ω–Ω—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    // –ü–†–ò–ú–ï–†: use Map or indexed structure for O(1) lookup
    const achievement = achievements.find(a => a.id === achievementId);
    
    if (!achievement) {
        console.error(`‚ùå –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ —Å ID "${achievementId}" –Ω–µ –Ω–∞–π–¥–µ–Ω–æ`);
        return;
    }
    
    // –î–æ–±–∞–≤–ª—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–±—ä–µ–∫—Ç—ã –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
    // –ü–†–ò–ú–ï–†: userData.achievements.push({ id: achievementId, unlockedAt: Date.now() });
    userData.achievements.push(achievementId);
    
    // –î–æ–±–∞–≤–ª—è–µ–º –æ—á–∫–∏ –æ–ø—ã—Ç–∞ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–Ω—É—Å—ã –∑–∞ —Ä–µ–¥–∫–æ—Å—Ç—å, –∫–æ–º–±–æ-–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    // –ü–†–ò–ú–ï–†: const bonus = calculateAchievementBonus(achievement, userData.achievements);
    userData.totalXP += achievement.points;
    
    // –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º —É—Ä–æ–≤–µ–Ω—å
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö –ø–æ–≤—ã—à–µ–Ω–∏–π —É—Ä–æ–≤–Ω—è
    // –ü–†–ò–ú–ï–†: checkMultipleLevelUps(oldLevel, newLevel);
    const newLevel = calculateLevel(userData.totalXP);
    if (newLevel > userData.level) {
        console.log(`üìà –ü–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è –±–ª–∞–≥–æ–¥–∞—Ä—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—é! ${userData.level} ‚Üí ${newLevel}`);
        userData.level = newLevel;
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –ø–æ–∫–∞–∑–∞ –∞–Ω–∏–º–∞—Ü–∏–∏
    // –ü–†–ò–ú–ï–†: scheduleDataSave(3000); // —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
    saveUserData();
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º popup —Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ–º
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ—á–µ—Ä–µ–¥—å popup-–æ–≤ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
    // –ü–†–ò–ú–ï–†: achievementPopupQueue.add(achievement);
    showAchievementPopup(achievement);
    
    console.log(`‚ú® –î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ "${achievement.title}" —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ! +${achievement.points} XP`);
    // –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    // –ü–†–ò–ú–ï–†: broadcastAchievement(achievementId, userData.username);
}

// –ü–æ–∫–∞–∑ popup —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—É—á–µ–Ω–Ω–æ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏, –∑–≤—É–∫–∏, —ç—Ñ—Ñ–µ–∫—Ç—ã
// –ü–†–ò–ú–ï–†: —Ä–∞–∑–Ω—ã–µ —Å—Ç–∏–ª–∏ popup –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
function showAchievementPopup(achievement) {
    console.log(`üéä –ü–æ–∫–∞–∑—ã–≤–∞–µ–º popup –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è: ${achievement.title}`);
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫–∞–∑–∞ popup
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å popup
    // –ü–†–ò–ú–ï–†: analytics.track('achievement_popup_shown', { achievementId: achievement.id });
    
    // –ù–∞—Ö–æ–¥–∏–º —ç–ª–µ–º–µ–Ω—Ç—ã popup
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–æ–∑–¥–∞–Ω–∏–µ popup –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
    // –ü–†–ò–ú–ï–†: const popup = createAchievementPopup(achievement);
    const popup = document.getElementById('achievement-popup');
    const icon = document.getElementById('popup-icon');
    const title = document.getElementById('popup-title');
    const description = document.getElementById('popup-description');
    const points = document.getElementById('popup-points');
    
    if (!popup || !icon || !title || !description || !points) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–æ–∑–¥–∞–Ω–∏–µ fallback —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        // –ü–†–ò–ú–ï–†: createMissingPopupElements();
        
        console.error('‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω—ã —ç–ª–µ–º–µ–Ω—Ç—ã popup –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è');
        return;
    }
    
    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ popup
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
    // –ü–†–ò–ú–ï–†: title.textContent = getLocalizedText(achievement.title, userData.language);
    icon.textContent = achievement.icon;
    title.textContent = achievement.title;
    description.textContent = achievement.description;
    points.textContent = achievement.points;
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º popup —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –∞–Ω–∏–º–∞—Ü–∏–π –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: if (achievement.rarity === 'legendary') { addEpicAnimation(); }
    popup.classList.remove('hidden');
    popup.classList.add('show');
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ä–∞–∑–ª–∏—á–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —á–∞—Å—Ç–∏—Ü
    // –ü–†–ò–ú–ï–†: createParticleEffect(achievement.rarity);
    createConfetti();
    
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ–º popup —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–µ –≤—Ä–µ–º—è –ø–æ–∫–∞–∑–∞
    // –ü–†–ò–ú–ï–†: const displayTime = getDisplayTimeByRarity(achievement.rarity);
    setTimeout(() => {
        closeAchievementPopup();
    }, 5000);
    
    console.log('‚úÖ Popup –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂—ë–Ω');
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–≤—É–∫–∞
    // –ü–†–ò–ú–ï–†: playAchievementSound(achievement.rarity);
}

// –ó–∞–∫—Ä—ã—Ç–∏–µ popup –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∏–º–∞—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è, –æ—á–∏—Å—Ç–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
// –ü–†–ò–ú–ï–†: fade out –∞–Ω–∏–º–∞—Ü–∏—è, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–≤—É–∫–æ–≤, –æ—á–∏—Å—Ç–∫–∞ —á–∞—Å—Ç–∏—Ü
function closeAchievementPopup() {
    console.log('‚ùå –ó–∞–∫—Ä—ã–≤–∞–µ–º popup –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è');
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–∏—è popup
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    // –ü–†–ò–ú–ï–†: analytics.track('achievement_popup_closed', { viewDuration: Date.now() - popupShownAt });
    
    const popup = document.getElementById('achievement-popup');
    if (popup) {
        // –°–∫—Ä—ã–≤–∞–µ–º popup —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
        // –ü–†–ò–ú–ï–†: popup.style.animation = 'fadeOut 0.3s ease-out';
        popup.classList.remove('show');
        popup.classList.add('hidden');
        
        console.log('‚úÖ Popup –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å–∫—Ä—ã—Ç');
    }
    
    // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: clearAllParticleEffects(); stopAllSounds();
    clearConfetti();
}

// –°–æ–∑–¥–∞–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –¥–ª—è –ø—Ä–∞–∑–¥–Ω–æ–≤–∞–Ω–∏—è
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: WebGL —ç—Ñ—Ñ–µ–∫—Ç—ã, —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –¥–≤–∏–∂–æ–∫
// –ü–†–ò–ú–ï–†: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Three.js –¥–ª—è 3D —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
function createConfetti() {
    console.log('üéä –°–æ–∑–¥–∞—ë–º –∞–Ω–∏–º–∞—Ü–∏—é –∫–æ–Ω—Ñ–µ—Ç—Ç–∏...');
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
    // –ü–†–ò–ú–ï–†: const particleCount = getParticleCountBySetting(userData.settings.effects);
    
    const confettiContainer = document.getElementById('confetti');
    if (!confettiContainer) {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
        // –ü–†–ò–ú–ï–†: confettiContainer = createConfettiContainer();
        
        console.error('‚ùå –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω');
        return;
    }
    
    // –¶–≤–µ—Ç–∞ –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ü–≤–µ—Ç–∞ –ø–æ —Ç–∏–ø—É –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
    // –ü–†–ò–ú–ï–†: colors = getColorsForAchievementType(achievement.category);
    const colors = ['#ff6b35', '#3498db', '#2ecc71', '#f39c12', '#9b59b6', '#e74c3c'];
    
    // –°–æ–∑–¥–∞—ë–º 50 —á–∞—Å—Ç–∏—Ü –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å—Ç–∏—Ü
    // –ü–†–ò–ú–ï–†: const count = getParticleCount(devicePerformance, userSettings);
    for (let i = 0; i < 50; i++) {
        // –°–æ–∑–¥–∞—ë–º DOM —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è —á–∞—Å—Ç–∏—Ü—ã
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
        // –ü–†–ò–ú–ï–†: const piece = confettiPool.get() || createConfettiPiece();
        const piece = document.createElement('div');
        piece.className = 'confetti-piece';
        
        // –°–ª—É—á–∞–π–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø—Ä–µ–¥–ø—Ä–æ—Å—á–∏—Ç–∞–Ω–Ω—ã–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        // –ü–†–ò–ú–ï–†: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–µ—è–Ω–æ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏
        const randomColor = colors[Math.floor(Math.random() * colors.length)];
        const randomLeft = Math.random() * 100; // –ø–æ–∑–∏—Ü–∏—è –ø–æ X –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
        const randomDelay = Math.random() * 2; // –∑–∞–¥–µ—Ä–∂–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        const randomDuration = 2 + Math.random() * 2; // –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞–¥–µ–Ω–∏—è
        
        // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏ –∫ —á–∞—Å—Ç–∏—Ü–µ
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        // –ü–†–ò–ú–ï–†: piece.style.setProperty('--fall-duration', `${randomDuration}s`);
        piece.style.backgroundColor = randomColor;
        piece.style.left = randomLeft + '%';
        piece.style.animationDelay = randomDelay + 's';
        piece.style.animationDuration = randomDuration + 's';
        
        // –î–æ–±–∞–≤–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—É –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–∫—É–º–µ–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        // –ü–†–ò–ú–ï–†: fragment.appendChild(piece); –∑–∞—Ç–µ–º container.appendChild(fragment);
        confettiContainer.appendChild(piece);
        
        // –£–¥–∞–ª—è–µ–º —á–∞—Å—Ç–∏—Ü—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–æ–∑–≤—Ä–∞—Ç –≤ –ø—É–ª –æ–±—ä–µ–∫—Ç–æ–≤
        // –ü–†–ò–ú–ï–†: setTimeout(() => confettiPool.return(piece), duration);
        setTimeout(() => {
            if (piece.parentNode) {
                piece.parentNode.removeChild(piece);
            }
        }, (randomDelay + randomDuration) * 1000);
    }
    
    console.log('‚ú® –ê–Ω–∏–º–∞—Ü–∏—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∞');
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π
    // –ü–†–ò–ú–ï–†: requestAnimationFrame –¥–ª—è smooth –∞–Ω–∏–º–∞—Ü–∏–π
}

// –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —á–∞—Å—Ç–∏—Ü –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–π
// –ü–†–ò–ú–ï–†: –æ—Ç–º–µ–Ω–∞ –≤—Å–µ—Ö setTimeout, –æ—á–∏—Å—Ç–∫–∞ GPU —Ä–µ—Å—É—Ä—Å–æ–≤
function clearConfetti() {
    console.log('üßπ –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ñ–µ—Ç—Ç–∏...');
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
    // –ü–†–ò–ú–ï–†: trackEffectUsage('confetti', duration, particleCount);
    
    const confettiContainer = document.getElementById('confetti');
    if (confettiContainer) {
        // –£–¥–∞–ª—è–µ–º –≤—Å–µ —á–∞—Å—Ç–∏—Ü—ã –∫–æ–Ω—Ñ–µ—Ç—Ç–∏
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–ª–∞–≤–Ω–æ–µ –∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ —á–∞—Å—Ç–∏—Ü
        // –ü–†–ò–ú–ï–†: fadeOutAllParticles().then(() => clearContainer());
        confettiContainer.innerHTML = '';
        
        console.log('‚úÖ –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –æ—á–∏—â–µ–Ω–æ');
    }
}

// –≠–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞)
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: ES6 –º–æ–¥—É–ª–∏, TypeScript, bundlers
// –ü–†–ò–ú–ï–†: export { startQuiz, checkAnswer, completeQuiz };

// –î–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: namespace –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (–¥–æ–±–∞–≤–ª—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü)
window.startQuiz = startQuiz;
window.checkAnswer = checkAnswer;
window.completeQuiz = completeQuiz;
window.closeAchievementPopup = closeAchievementPopup;
window.initByPage = initByPage;

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π HTML —Å—Ç—Ä–∞–Ω–∏—Ü–µ
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å data-page –∞—Ç—Ä–∏–±—É—Ç –∏–ª–∏ window.location.pathname
function initByPage() {
    // –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ HTML-—Ñ–∞–π–ª–∞
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –±–æ–ª–µ–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    const page = location.pathname.split('/').pop();
    // –ü–æ–¥–¥–µ—Ä–∂–∫–∞: index.html, subjects.html, quiz.html, map.html, achievements.html, calendar.html
    switch(page) {
        case 'index.html':
        case '': // –ö–æ—Ä–µ–Ω—å = index.html
            // –ì–ª–∞–≤–Ω–∞—è
            updateUserInterface();
            break;
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (subjects, quiz, map, achievements, calendar)
        default:
            break;
    }
}


// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏
// –ü–†–ò–ú–ï–†: console.log('App.js v1.2.3 loaded successfully');
console.log('üéì –°–∫—Ä–∏–ø—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è "–°–∞–º–æ–ª—ë—Ç –∑–Ω–∞–Ω–∏–π" –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ!'); // –ú–∞—Ä–∫–µ—Ä —É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞

// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: Service Worker –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã
// –ü–†–ò–ú–ï–†: if ('serviceWorker' in navigator) { registerServiceWorker(); }

// –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—à–∏–±–æ–∫
// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –æ—Ñ–ª–∞–π–Ω-—Ñ–æ–ª–±—ç–∫–∏
function registerServiceWorker() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–µ—Ä–≤–∏—Å-–≤–æ—Ä–∫–µ—Ä–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
    // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: graceful degradation –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤
    if ('serviceWorker' in navigator) {
        // –ü—ã—Ç–∞–µ–º—Å—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å service worker
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –≤–µ—Ä—Å–∏—è SW —á–µ—Ä–µ–∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä
        navigator.serviceWorker.register('sw.js').then(function(reg) {
            // –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è SW
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è SW, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ
            console.log('üõ°Ô∏è Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω', reg.scope);
        }).catch(function(err) {
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ SW
            // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–ø—ã—Ç–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∑–∂–µ
            console.warn('‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å Service Worker:', err.message);
        });
    } else {
        // –ï—Å–ª–∏ SW –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
        // –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º —á–µ—Ä–µ–∑ Cache API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
        console.log('‚ÑπÔ∏è Service Worker –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ');
    }
}

// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
// –ü–†–ò–ú–ï–†: window.addEventListener('error', handleGlobalError);

// –î–õ–Ø –ú–ê–°–®–¢–ê–ë–ò–†–û–í–ê–ù–ò–Ø: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
// –ü–†–ò–ú–ï–†: if (window.performance) { trackPerformanceMetrics(); }